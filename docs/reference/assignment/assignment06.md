### 3시간 학습 로드맵

## 3시간 압축 학습 가이드: 분산 환경 동시성 제어 & 캐시 전략 핵심만 딱!

### 시간 분배

| 세션 | 주제 | 소요 시간 |
| --- | --- | --- |
| 1 | 낙관적/비관적 락 전략 | 40분 |
| 2 | Redis 분산락 적용 | 40분 |
| 3 | 캐시 전략과 성능 개선 | 40분 |
| 4 | Lock & Cache 종합 적용 실습 플랜 | 20분 |

---

### 세션 1: 낙관적/비관적 락 전략 (40분)

**핵심 메시지**

- 동시성 문제는 시스템 장애를 초래할 수 있다
- Lock 선택 기준을 명확히 이해하고 적용해야 한다

**퀴즈**

- 낙관적 Lock이 적합한 상황은? (객관식)
- 비관적 Lock을 적용할 때 주의해야 할 점은?

---

### 세션 2: Redis 분산락 적용 (40분)

**핵심 메시지**

- 단일 인스턴스를 넘어 서버 간 동시성 제어를 Redis로 해결할 수 있다
- 락-트랜잭션 순서가 중요하다

**퀴즈**

- Redis 분산락 Simple/Spin/Subscribe 방식 차이는?
- 락을 먼저 잡지 않고 트랜잭션을 시작하면 생기는 문제는?

---

### 세션 3: 캐시 전략과 성능 개선 (40분)

**핵심 메시지**

- 조회 부하를 줄이려면 캐시를 적극 활용해야 한다
- 메모리 캐시 vs 외부 캐시 차이를 이해하고 적절히 선택한다

**퀴즈**

- 메모리 캐시와 외부 캐시의 주요 차이점은?
- Expiration과 Eviction의 차이점은?

---

### 세션 4: Lock & Cache 종합 적용 실습 플랜 (20분)

**핵심 메시지**

- Lock과 Cache는 함께 적용하면 강력하다
- 분산 환경에서 일관성과 성능을 동시에 잡는 구조를 설계한다

**퀴즈**

- Lock과 Cache를 함께 사용할 때 가장 주의할 점은?
- 캐시 일관성 문제를 해결하는 대표적인 방법은?

---

<aside>
🗓️ **Weekly Schedule Summary: 이번 주차 과제 요구 사항**

</aside>

`REPO를 새로 생성하셨다면 이것부터 세팅해주세요!`

- PR 템플릿 세팅하기!
    - Repo를 생성하고 `.github` 폴더를 생성 후 `pull_request_template.md` 파일을 만들어서 아래 템플릿을 복사/붙여넣기해주세요!
- PR 템플릿
    
    ```markdown
    ## :pushpin: PR 제목 규칙
    [STEP0X] 이름 - 선택 시나리오 (e-commerce/concert)
    
    ---
    ### **핵심 체크리스트** :white_check_mark:
    
    #### :one: 분산락 적용 (3개)
    - [ ] 적절한 곳에 분산락이 사용되었는가? 
    - [ ] 트랜젝션 순서와 락순서가 보장되었는가?
    
    #### :two: 통합 테스트 (2개)
    - [ ] infrastructure 레이어를 포함하는 통합 테스트가 작성되었는가?
    - [ ] 핵심 기능에 대한 흐름이 테스트에서 검증되었는가?
    - [ ] 동시성을 검증할 수 있는 테스트코드로 작성 되었는가?
    - [ ] Test Container 가 적용 되었는가?
    
    #### :three: Cache 적용 (3개)
    - [ ] 적절하게 Key 적용이 되었는가?
    
    ---
    #### STEP11
    - [ ] Redis 분산락 적용
    - [ ] Test Container 구성
    - [ ] 기능별 통합 테스트
    
    #### STEP12
    - [ ] 캐시 필요한 부분 분석
    - [ ] redis 기반의 캐시 적용
    - [ ] 성능 개선 등을 포함한 보고서 제출
    
    ### **간단 회고** (3줄 이내)
    - **잘한 점**: 
    - **어려운 점**: 
    - **다음 시도**:
    ```
    

<aside>
🚩 **과제 : 이번 챕터 과제**

</aside>

### **`STEP11 - Distributed Lock`**

- Redis 기반의 분산락을 직접 구현해보고 동작에 대한 통합테스트 작성
- 주문/예약/결제 기능 등에 **(1)** 적절한 키 **(2)** 적절한 범위를 선정해 분산락을 적용

### **`STEP12 - Cache`**

- 조회가 오래 걸리거나, 자주 변하지 않는 데이터 등 애플리케이션의 요청 처리 성능을 높이기 위해 캐시 전략을 취할 수 있는 구간을 점검하고, 적절한 캐시 전략을 선정
- 위 구간에 대해 Redis 기반의 캐싱 전략을 시나리오에 적용하고 성능 개선 등을 포함한 보고서 작성 및 제출

<aside>
🚥 **과제 평가 기준과 핵심 역량 Summary**

</aside>

### P/F 기준

<aside>
🚩 **과제 : 이번 챕터 과제 평가 기준에 따라 step의 pass/fail을 정합니다.**

</aside>

### 과제 평가 기준

- 분산 환경에서의 동시성 제어에 대한 이해
- 캐시와 DB 조회 부하에 대한 이해

**[ Step 11 ]**

**< Transaction 의 범위와 Redis 기반의 분산락의 활용에 대한 이해 >**

- 분산락에 대한 이해와 DB Tx 과 혼용할 때 주의할 점을 이해하였는지
- 적절하게 분산락이 적용되는 범위에 대해 구현을 진행하였는지

**[ Step 12 ]**

**< 선택한 시나리오에서의 캐싱 전략 설계 - 리드미 권장 >**

- 각 시나리오에서 발생하는 Query 에 대한 충분한 이해가 있는지
- 각 시나리오에서 캐시 가능한 구간을 분석하였는지
- 대량의 트래픽 발생시 지연이 발생할 수 있는 조회쿼리에 대해 분석하고, 이에 대한 결과를 작성하였는지

### 도전 항목

## Distributed Lock & Cache 심화과제 평가 항목

- 트랜잭션의 범위와 분산 환경에서의 Lock 에 대한 이해
- 동시성 이슈 발생 원인 이해와 적절한 Redis 기반의 분산락 적용 전략
- RedisTemplate을 활용한 의존성 최소화 및 Repository 구현의 최적화
- Redis 캐싱 전략(LookAside, WriteThrough 등)의 명확한 이해와 적절한 적용
- 캐시 데이터 직렬화/역직렬화 오류 처리 전략(JSON 직렬화 등)의 적절한 활용
- 캐싱 로직 적용 계층(도메인 vs 레포지토리)의 명확한 기준 및 일관성 유지
- 보고서의 문제 배경 및 흐름(배경, 문제해결, 테스트, 한계점, 결론 등)의 명확한 구성

### 핵심 키워드 및 역량

## 🔒 Distributed Lock (STEP 11)

DB 레벨의 락에서 벗어나 분산 환경의 작업 단위 분산락에 대한 이해

### 🎯 과제 목표

- DB Lock 의 한계점을 파악하고 분산환경에서의 동시성 제어 수단에 대해 고민합니다.
- 분산락의 동작방식을 이해하고 구현해보고 적용사례에 대해 고민합니다.
- Redis 의 Atomicity 기반의 분산락을 구현하고 실제 시나리오에 적용해봅니다.

### 🛠️ 핵심 기술 키워드

- Transaction 의 범위와 DB Lock 의 한계
- 분산환경에서의 Lock
- Redis 의 Atomicity 기반 연산

### 🧠 핵심 역량

| 역량 | 설명 |
| --- | --- |
| Transaction 에 대한 이해 | DB Transaction 이 아닌 “작업단위” 로서의 Transaction 에 대한 올바른 이해 |
| 분산환경에서의 잠금 제어 | 분산환경에서 높은 throughput 을 가진 잠금 구현 |
| Redis 의 Atomicity | 레디스의 원자적 특성을 이해하고, 이를 기반으로 한 분산락을 구현 |

---

## 💽 Cache (STEP 12)

**조회 성능 개선을 위한 캐싱 전략 설계 및 적용**

### 🎯 과제 목표

- 트래픽이 많은 API나 DB 부하가 높은 조회 로직에 대해 캐싱을 통해 성능을 개선합니다.
- 캐시 적용 방식(예: Read-Through, Cache Aside 등)과 적절한 Expiration / Eviction 전략을 설계하고 문서화합니다.
- **Cache Stampede(동시 캐시 부재)** 이슈에 대해 학습하고, 대응 전략을 설계합니다.

### 🛠️ 핵심 기술 키워드

- 캐시 전략 (Memory Cache, Redis Cache)
- Expiration / Eviction
- Cache-Aside / Read-Through 패턴
- 캐시 스탬피드(Cache Stampede)

### 🧠 핵심 역량

| 역량 | 설명 |
| --- | --- |
| **조회 성능 분석력** | 트래픽 병목 지점을 분석하고 캐싱 포인트를 판단하는 능력 |
| **캐시 전략 설계력** | TTL 설정, 캐시 무효화 시점, Expiration/Eviction 방식을 설계 |
| **다양한 캐시 적용 경험** | Application 메모리 캐시 / Redis 캐시 적용 실습 |
| **안정적 서비스 설계** | Cache Stampede 및 Race Condition 방어를 위한 실무적인 고민 |

---

## 🧭 요약 정리

| 구분 | STEP 11 | STEP 12 |
| --- | --- | --- |
| 핵심 주제 | 분산환경에서의 락 | 조회 성능 개선용 캐싱 |
| 과제 예시 | Redis 기반의 분산락을 통한 주문, 결제 제어 | 인기 상품 조회 TTL 캐싱, 피드 좋아요 캐싱 |
| 핵심 자료구조 | Redis (String, TTL) | Memory / Redis (String 등) |
| 제출 형태 | 코드 작성 및 PR 제출 | README 문서화 or 코드 주석 |