# Product Domain - Use Cases

**문서 정보**
- **버전**: 1.0.0
- **최종 수정일**: 2025-11-05
- **상태**: Active
- **작성자**: Development Team
- **대상 독자**: Product Managers, Business Analysts, QA

---

**문서 네비게이션**
- ⬆️ 상위: [Dashboard 개요](../README.md)
- ⬅️ 이전: [아키텍처](../architecture.md)
- ➡️ 다음: [Product 시퀀스 다이어그램](./sequence-diagrams.md)
- 🔗 기술 문서: [Product 시퀀스 다이어그램](./sequence-diagrams.md)

---

## 목차
1. [개요](#1-개요)
2. [유스케이스 목록](#2-유스케이스-목록)
3. [UC-PROD-01: 상품 목록 조회](#3-uc-prod-01-상품-목록-조회)
4. [UC-PROD-02: 상품 상세 조회](#4-uc-prod-02-상품-상세-조회)
5. [UC-PROD-03: 인기 상품 조회](#5-uc-prod-03-인기-상품-조회)

---

## 1. 개요

### 1.1 도메인 설명
Product 도메인은 상품 조회와 재고 정보 제공을 담당합니다. 고객이 구매할 수 있는 상품의 정보를 제공하고 인기 상품 통계를 제공합니다.

### 1.2 주요 책임
- 상품 목록 조회 (페이지네이션)
- 상품 상세 정보 조회
- 상품 옵션 정보 제공
- 인기 상품 통계 제공
- 재고 상태 표시

### 1.3 관련 문서
- [요구사항: FR-PROD-01 ~ FR-PROD-05](../requirements.md)
- [사용자 스토리: US-PROD-01 ~ US-PROD-05](../user-stories.md)
- [API 명세: Product APIs](../api-specification.md)
- [데이터 모델: Product Domain](../data-model.md)
- [기술 명세: Product 시퀀스 다이어그램](./sequence-diagrams.md)

---

## 2. 유스케이스 목록

| ID | 유스케이스 명 | Actor | User Story | API Endpoint | 우선순위 |
|----|---------------|-------|------------|--------------|----------|
| UC-PROD-01 | 상품 목록 조회 | Customer | US-PROD-01 | GET /products | MUST |
| UC-PROD-02 | 상품 상세 조회 | Customer | US-PROD-02 | GET /products/:id | MUST |
| UC-PROD-03 | 인기 상품 조회 | Customer | US-PROD-03 | GET /products/popular | SHOULD |

---

## 3. UC-PROD-01: 상품 목록 조회

### 3.1 기본 정보

| 항목 | 내용 |
|------|------|
| **Use Case ID** | UC-PROD-01 |
| **Use Case 명** | 상품 목록 조회 |
| **Actor** | Customer |
| **Goal** | 고객이 쇼핑몰의 상품 목록을 확인하고 관심 있는 상품을 찾는다 |
| **관련 User Story** | US-PROD-01 |
| **관련 요구사항** | FR-PROD-01 |
| **API Endpoint** | GET /products |
| **우선순위** | MUST |

### 3.2 유스케이스 설명
고객이 등록된 모든 상품의 목록을 페이지네이션으로 조회합니다. 기본 정보(이름, 가격, 재고 유무)를 포함합니다.

### 3.3 사전 조건 (Pre-conditions)
- 시스템에 조회 가능한 상품이 등록되어 있어야 함

### 3.4 주요 흐름 (Main Flow)

1. **상품 목록 페이지 접근**
   - 고객이 메인 페이지 또는 네비게이션에서 "상품 목록"을 클릭한다
   - 시스템은 상품 목록 페이지로 이동한다

2. **상품 목록 표시**
   - 시스템은 상품 목록을 표시한다 (기본 10개씩):
     - 상품 이미지
     - 상품명
     - 가격
     - 재고 상태 (재고 있음 / 품절)
   - 시스템은 최신 상품부터 표시한다 (기본 정렬)

3. **페이지 이동**
   - 고객이 다음/이전 페이지로 이동한다
   - 시스템은 해당 페이지의 상품 목록을 표시한다

4. **상품 선택**
   - 고객이 특정 상품을 클릭한다
   - 시스템은 상품 상세 페이지로 이동한다

### 3.5 대체 흐름 (Alternative Flows)

**AF-1: 상품이 없는 경우**
- 시스템은 "등록된 상품이 없습니다" 메시지를 표시한다
- 고객은 다른 페이지로 이동할 수 있다

### 3.6 사후 조건 (Post-conditions)
- 고객이 상품 목록을 확인한다
- 고객이 관심 있는 상품을 찾아 상세 페이지로 이동할 수 있다

### 3.7 비즈니스 규칙 (Business Rules)

| ID | 규칙 | 설명 |
|----|------|------|
| BR-PROD-01 | 기본 정렬 | 최신 상품부터 표시 (created_at DESC) |
| BR-PROD-02 | 기본 페이지 크기 | 페이지 크기를 지정하지 않으면 기본값 10개 적용 |
| BR-PROD-03 | 최대 페이지 크기 | 한 번에 최대 100개까지만 조회 가능 |
| BR-PROD-04 | 재고 상태 표시 | availableQuantity > 0이면 "재고 있음", 아니면 "품절" |

### 3.8 예외 케이스 (Exception Cases)

| 예외 상황 | 시스템 동작 |
|-----------|-------------|
| 잘못된 page 값 | 400 Bad Request: "페이지는 1 이상이어야 합니다." |
| 잘못된 limit 값 | 400 Bad Request: "페이지 크기는 1-100 사이여야 합니다." |

### 3.9 관련 유스케이스
- [UC-PROD-02: 상품 상세 조회](#4-uc-prod-02-상품-상세-조회) - 목록에서 상세로 이동

---

## 4. UC-PROD-02: 상품 상세 조회

### 4.1 기본 정보

| 항목 | 내용 |
|------|------|
| **Use Case ID** | UC-PROD-02 |
| **Use Case 명** | 상품 상세 조회 |
| **Actor** | Customer |
| **Goal** | 고객이 상품의 상세 정보를 확인하고 구매 여부를 결정한다 |
| **관련 User Story** | US-PROD-02 |
| **관련 요구사항** | FR-PROD-02, FR-PROD-03 |
| **API Endpoint** | GET /products/:id |
| **우선순위** | MUST |

### 4.2 유스케이스 설명
특정 상품의 상세 정보를 조회합니다. 옵션 목록과 재고 정보를 포함합니다.

### 4.3 사전 조건 (Pre-conditions)
- 조회하려는 상품이 시스템에 존재해야 함

### 4.4 주요 흐름 (Main Flow)

1. **상품 상세 페이지 접근**
   - 고객이 상품 목록에서 특정 상품을 클릭한다
   - 시스템은 상품 상세 페이지로 이동한다

2. **상품 기본 정보 표시**
   - 시스템은 상품의 기본 정보를 표시한다:
     - 상품 이미지
     - 상품명
     - 가격
     - 상세 설명

3. **옵션 정보 표시**
   - 시스템은 상품의 옵션을 type별로 그룹화하여 표시한다:
     - 옵션 타입 (예: 색상, 사이즈)
     - 옵션명
     - 추가 가격
     - 재고 상태
   - 예시:
     - 색상: 빨강 (+0원, 재고있음), 파랑 (+0원, 재고있음)
     - 사이즈: S (+0원, 품절), M (+0원, 재고있음), L (+1,000원, 재고있음)

4. **옵션 선택 및 수량 입력**
   - 고객이 원하는 옵션을 선택한다
   - 고객이 구매 수량을 입력한다
   - 시스템은 총 금액을 계산하여 표시한다
     - 총 금액 = (상품 가격 + 옵션 추가 가격) × 수량

5. **장바구니 담기 또는 주문**
   - 고객이 "장바구니 담기" 또는 "바로 구매" 버튼을 클릭한다
   - 시스템은 해당 프로세스를 진행한다

### 4.5 대체 흐름 (Alternative Flows)

**AF-1: 존재하지 않는 상품**
- 시스템은 "상품을 찾을 수 없습니다" 에러 페이지를 표시한다
- 고객은 상품 목록 페이지로 돌아갈 수 있다

**AF-2: 모든 옵션 품절**
- 시스템은 모든 옵션이 품절 상태임을 표시한다
- 시스템은 "장바구니 담기" 및 "바로 구매" 버튼을 비활성화한다
- 고객은 재입고 알림을 신청할 수 있다 (추후 기능)

### 4.6 사후 조건 (Post-conditions)
- 고객이 상품의 모든 상세 정보를 확인한다
- 고객이 옵션과 수량을 선택하여 구매를 진행할 수 있다

### 4.7 비즈니스 규칙 (Business Rules)

| ID | 규칙 | 설명 |
|----|------|------|
| BR-PROD-05 | 옵션 그룹화 | type 필드 기준으로 옵션 그룹화 표시 |
| BR-PROD-06 | 재고 상태 표시 | 옵션별 재고 상태 (availableQuantity 기준) |
| BR-PROD-07 | 총 금액 계산 | (상품 가격 + 옵션 추가 가격) × 수량 |
| BR-PROD-08 | 품절 옵션 선택 불가 | 재고가 없는 옵션은 선택 불가 처리 |

### 4.8 예외 케이스 (Exception Cases)

| 예외 상황 | 시스템 동작 |
|-----------|-------------|
| 존재하지 않는 상품 | 404 Not Found: "상품을 찾을 수 없습니다." |
| 잘못된 UUID 형식 | 400 Bad Request: "잘못된 상품 ID 형식입니다." |

### 4.9 관련 유스케이스
- [UC-CART-01: 장바구니 아이템 추가](../cart/use-cases.md) - 장바구니 담기
- [UC-PROD-01: 상품 목록 조회](#3-uc-prod-01-상품-목록-조회) - 목록으로 돌아가기

---

## 5. UC-PROD-03: 인기 상품 조회

### 5.1 기본 정보

| 항목 | 내용 |
|------|------|
| **Use Case ID** | UC-PROD-03 |
| **Use Case 명** | 인기 상품 조회 (Top 5) |
| **Actor** | Customer, System |
| **Goal** | 고객이 최근 3일간 인기 있는 상품을 확인하고 구매 결정에 참고한다 |
| **관련 User Story** | US-PROD-03 |
| **관련 요구사항** | FR-PROD-05 |
| **API Endpoint** | GET /products/popular |
| **우선순위** | SHOULD |

### 5.2 유스케이스 설명
최근 3일간 판매량이 높은 상위 5개 상품을 조회합니다. 배치 작업으로 미리 계산된 캐시 데이터를 반환합니다.

### 5.3 사전 조건 (Pre-conditions)
- 배치 작업이 정상적으로 실행되어 통계 데이터가 생성되어 있어야 함

### 5.4 주요 흐름 (Main Flow)

1. **인기 상품 페이지 접근**
   - 고객이 메인 페이지 또는 네비게이션에서 "인기 상품"을 클릭한다
   - 시스템은 인기 상품 페이지로 이동한다

2. **인기 상품 목록 표시**
   - 시스템은 캐시된 인기 상품 통계를 조회한다
   - 시스템은 상위 5개 상품을 표시한다:
     - 순위 (1위 ~ 5위)
     - 상품 정보 (이미지, 이름, 가격)
     - 최근 3일간 판매 수량
     - 최근 3일간 매출액
   - 순위는 판매 수량 기준으로 정렬됨

3. **상품 선택**
   - 고객이 인기 상품 중 하나를 클릭한다
   - 시스템은 해당 상품의 상세 페이지로 이동한다

### 5.5 대체 흐름 (Alternative Flows)

**AF-1: 통계 데이터가 없는 경우**
- 시스템은 "아직 인기 상품 데이터가 없습니다" 메시지를 표시한다
- 고객은 다른 페이지로 이동할 수 있다

**AF-2: 캐시 만료 (배치 작업 실패)**
- 시스템은 마지막으로 성공한 캐시 데이터를 반환한다
- 시스템은 배치 작업 재시도를 예약한다

### 5.6 사후 조건 (Post-conditions)
- 고객이 인기 상품 목록을 확인한다
- 고객이 트렌드를 파악하고 구매 결정에 참고한다

### 5.7 비즈니스 규칙 (Business Rules)

| ID | 규칙 | 설명 |
|----|------|------|
| BR-PROD-09 | 집계 기간 | 최근 3일간 완료된 주문 기준 |
| BR-PROD-10 | 순위 기준 | 판매 수량 기준 내림차순 정렬 |
| BR-PROD-11 | 상위 5개 | 최대 5개까지만 표시 |
| BR-PROD-12 | 캐시 전략 | 배치 작업으로 계산된 데이터 사용 (실시간 아님) |
| BR-PROD-13 | 갱신 주기 | 10분마다 배치 작업 실행, 캐시 TTL 15분 |

### 5.8 예외 케이스 (Exception Cases)

| 예외 상황 | 시스템 동작 |
|-----------|-------------|
| 캐시 데이터 없음 | 200 OK: 빈 배열 반환 |
| 배치 작업 실패 | 200 OK: 마지막 성공 데이터 반환 |

### 5.9 배치 작업

**배치 작업: 인기 상품 통계 계산**
- **실행 주기**: 10분마다
- **처리 내용**:
  1. 최근 3일간 완료된 주문 조회 (status = COMPLETED)
  2. 상품별 판매 수량 집계
  3. 상품별 매출액 집계 (판매 수량 × 상품 가격)
  4. 판매 수량 기준 내림차순 정렬
  5. 상위 5개 추출
  6. 캐시에 저장 (TTL: 15분)
- **실패 처리**:
  - 실패 시 기존 캐시 유지
  - 다음 실행 시 재시도
  - 에러 로그 기록

### 5.10 관련 유스케이스
- [UC-PROD-02: 상품 상세 조회](#4-uc-prod-02-상품-상세-조회) - 인기 상품 클릭 시

---

## 6. 도메인 용어 정리

| 용어 | 설명 |
|------|------|
| **상품 (Product)** | 판매하는 상품의 기본 정보 (이름, 가격, 설명) |
| **상품 옵션 (Product Option)** | 상품의 선택 가능한 옵션 (색상, 사이즈 등) |
| **옵션 타입 (Option Type)** | 옵션을 그룹화하는 기준 (예: "색상", "사이즈") |
| **재고 (Stock)** | 옵션별 판매 가능 수량 정보 |
| **가용 재고 (Available Quantity)** | 현재 판매 가능한 수량 |
| **인기 상품 (Popular Products)** | 최근 3일간 판매량 상위 5개 상품 |
| **판매 수량 (Sales Quantity)** | 특정 기간 동안 판매된 총 수량 |
| **매출액 (Revenue)** | 특정 기간 동안의 총 판매 금액 |

---

## 7. 관련 문서

- [아키텍처](../architecture.md) - 시스템 아키텍처
- [요구사항 분석](../requirements.md) - 비즈니스 요구사항
- [사용자 스토리](../user-stories.md) - 사용자 관점의 시나리오
- [API 명세서](../api-specification.md) - REST API 계약
- [데이터 모델](../data-model.md) - 데이터베이스 스키마
- [Product 시퀀스 다이어그램](./sequence-diagrams.md) - 기술 구현 명세
- [Cart 유스케이스](../cart/use-cases.md) - 다음 도메인

---

## 8. 버전 히스토리

| 버전 | 날짜 | 작성자 | 변경 내역 |
|------|------|--------|-----------|
| 1.0.0 | 2025-11-05 | Development Team | 초기 문서 작성 |

---

**문서 끝**
