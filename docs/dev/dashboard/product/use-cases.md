# Product Domain - Use Cases

**문서 정보**
- **버전**: 2.0.0
- **최종 수정일**: 2025-11-03
- **상태**: Active
- **작성자**: Development Team
- **대상 독자**: Product Managers, Business Analysts, QA

---

**문서 네비게이션**
- ⬆️ 상위: [Dashboard 개요](../README.md)
- ⬅️ 이전: [아키텍처](../architecture.md)
- ➡️ 다음: [Product 시퀀스 다이어그램](./sequence-diagrams.md)
- 🔗 기술 문서: [Product 시퀀스 다이어그램](./sequence-diagrams.md)

---

## 목차
1. [개요](#1-개요)
2. [유스케이스 목록](#2-유스케이스-목록)
3. [UC-PROD-01: 상품 목록 조회](#3-uc-prod-01-상품-목록-조회)
4. [UC-PROD-02: 상품 상세 조회](#4-uc-prod-02-상품-상세-조회)
5. [UC-PROD-03: 인기 상품 조회](#5-uc-prod-03-인기-상품-조회)
6. [UC-PROD-04: 재고 조회](#6-uc-prod-04-재고-조회)

---

## 1. 개요

### 1.1 도메인 설명
Product 도메인은 상품 정보 조회와 재고 확인을 담당하는 핵심 도메인입니다. 고객이 구매할 상품을 탐색하고 선택할 수 있도록 지원합니다.

### 1.2 주요 책임
- 상품 정보 제공 (목록, 상세)
- 인기 상품 추천
- 재고 정보 제공
- 카테고리별 상품 필터링

### 1.3 관련 문서
- [요구사항: FR-PROD-01 ~ FR-PROD-05](../requirements.md)
- [사용자 스토리: US-PROD-01 ~ US-PROD-05](../user-stories.md)
- [API 명세: Product APIs](../api-specification.md)
- [데이터 모델: Product Domain](../data-model.md)
- [기술 명세: Product 시퀀스 다이어그램](./sequence-diagrams.md)

---

## 2. 유스케이스 목록

| ID | 유스케이스 명 | Actor | User Story | API Endpoint | 우선순위 |
|----|---------------|-------|------------|--------------|----------|
| UC-PROD-01 | 상품 목록 조회 | Customer | US-PROD-01 | GET /products | MUST |
| UC-PROD-02 | 상품 상세 조회 | Customer | US-PROD-02 | GET /products/:id | MUST |
| UC-PROD-03 | 인기 상품 조회 | Customer | US-PROD-03 | GET /products/popular | SHOULD |
| UC-PROD-04 | 재고 조회 | Customer | US-PROD-04 | GET /products/:id/stock | MUST |

---

## 3. UC-PROD-01: 상품 목록 조회

### 3.1 기본 정보

| 항목 | 내용 |
|------|------|
| **Use Case ID** | UC-PROD-01 |
| **Use Case 명** | 상품 목록 조회 (페이지네이션) |
| **Actor** | Customer |
| **Goal** | 고객이 판매 중인 상품 목록을 조회하고 필터링하여 원하는 상품을 찾는다 |
| **관련 User Story** | US-PROD-01 |
| **관련 요구사항** | FR-PROD-01 |
| **API Endpoint** | GET /products |
| **우선순위** | MUST |

### 3.2 유스케이스 설명
고객이 판매 중인 상품 목록을 페이지네이션으로 조회합니다. 카테고리별 필터링, 가격 범위 필터, 정렬 옵션을 지원하여 고객이 원하는 상품을 효율적으로 탐색할 수 있습니다.

### 3.3 사전 조건 (Pre-conditions)
- 시스템에 조회 가능한 상품이 등록되어 있어야 함
- (선택) 카테고리로 필터링하는 경우 해당 카테고리가 존재해야 함

### 3.4 주요 흐름 (Main Flow)

1. **상품 목록 요청**
   - 고객이 상품 목록 페이지에 접속한다
   - 시스템은 기본 설정(첫 페이지, 20개씩)으로 상품 목록을 표시한다

2. **필터 적용 (선택)**
   - 고객이 카테고리를 선택한다
   - 고객이 가격 범위를 설정한다 (최소 가격, 최대 가격)
   - 시스템은 필터 조건에 맞는 상품만 표시한다

3. **정렬 옵션 적용 (선택)**
   - 고객이 정렬 기준을 선택한다 (최신순, 가격순, 이름순)
   - 시스템은 선택한 기준으로 상품을 정렬하여 표시한다

4. **페이지 이동**
   - 고객이 다음/이전 페이지로 이동한다
   - 시스템은 해당 페이지의 상품 목록을 표시한다

5. **결과 표시**
   - 시스템은 각 상품의 기본 정보를 표시한다:
     - 상품명
     - 가격
     - 카테고리
     - 썸네일 이미지
   - 시스템은 페이지네이션 정보를 표시한다:
     - 현재 페이지
     - 전체 페이지 수
     - 전체 상품 수

### 3.5 대체 흐름 (Alternative Flows)

**AF-1: 필터 조건에 맞는 상품이 없는 경우**
- 시스템은 "검색 결과가 없습니다" 메시지를 표시한다
- 시스템은 필터 조건을 초기화할 수 있는 옵션을 제공한다

**AF-2: 잘못된 페이지 번호 입력**
- 고객이 1보다 작은 페이지 번호를 입력한다
- 시스템은 "페이지는 1 이상이어야 합니다" 에러 메시지를 표시한다

**AF-3: 잘못된 페이지 크기 입력**
- 고객이 1~100 범위를 벗어난 페이지 크기를 입력한다
- 시스템은 "페이지 크기는 1-100 사이여야 합니다" 에러 메시지를 표시한다

### 3.6 사후 조건 (Post-conditions)
- 고객이 필터 및 정렬 조건에 맞는 상품 목록을 확인한다
- 고객이 페이지네이션 정보를 통해 전체 상품 규모를 파악한다
- 고객이 관심 있는 상품을 선택하여 상세 페이지로 이동할 수 있다

### 3.7 비즈니스 규칙 (Business Rules)

| ID | 규칙 | 설명 |
|----|------|------|
| BR-PROD-01 | 기본 페이지 크기 | 페이지 크기를 지정하지 않으면 기본값 20개 적용 |
| BR-PROD-02 | 최대 페이지 크기 | 한 번에 최대 100개까지만 조회 가능 |
| BR-PROD-03 | 기본 정렬 | 정렬 기준을 지정하지 않으면 최신 등록순 적용 |
| BR-PROD-04 | 카테고리 필터 | 존재하지 않는 카테고리로 필터링 시 에러 반환 |

### 3.8 예외 케이스 (Exception Cases)

| 예외 상황 | 시스템 동작 |
|-----------|-------------|
| 잘못된 페이지 번호 | 400 Bad Request: "페이지는 1 이상이어야 합니다." |
| 잘못된 페이지 크기 | 400 Bad Request: "페이지 크기는 1-100 사이여야 합니다." |
| 존재하지 않는 카테고리 | 400 Bad Request: "존재하지 않는 카테고리입니다." |

---

## 4. UC-PROD-02: 상품 상세 조회

### 4.1 기본 정보

| 항목 | 내용 |
|------|------|
| **Use Case ID** | UC-PROD-02 |
| **Use Case 명** | 상품 상세 조회 |
| **Actor** | Customer |
| **Goal** | 고객이 특정 상품의 상세 정보를 확인하여 구매 결정을 내린다 |
| **관련 User Story** | US-PROD-02 |
| **관련 요구사항** | FR-PROD-02 |
| **API Endpoint** | GET /products/:id |
| **우선순위** | MUST |

### 4.2 유스케이스 설명
고객이 특정 상품의 상세 정보를 조회합니다. 상품 기본 정보, 옵션(색상, 사이즈), 재고 정보, 카테고리 정보를 포함하여 구매 결정에 필요한 모든 정보를 제공합니다.

### 4.3 사전 조건 (Pre-conditions)
- 조회하려는 상품이 시스템에 등록되어 있어야 함
- 상품 ID가 유효한 UUID 형식이어야 함

### 4.4 주요 흐름 (Main Flow)

1. **상품 선택**
   - 고객이 상품 목록에서 특정 상품을 클릭한다
   - 시스템은 해당 상품의 상세 페이지로 이동한다

2. **상품 정보 표시**
   - 시스템은 상품의 기본 정보를 표시한다:
     - 상품명
     - 상세 설명
     - 가격
     - 카테고리 정보
     - 상품 이미지

3. **옵션 정보 표시**
   - 시스템은 상품의 옵션 정보를 표시한다:
     - 색상 옵션 (예: 레드, 블루, 블랙)
     - 사이즈 옵션 (예: S, M, L, XL)
   - 고객이 원하는 옵션을 선택할 수 있도록 표시한다

4. **재고 정보 표시**
   - 시스템은 각 옵션별 재고 상태를 표시한다:
     - "재고 있음" (availableQuantity > 0)
     - "품절" (availableQuantity = 0)
   - 고객이 구매 가능한 옵션을 쉽게 식별할 수 있도록 표시한다

5. **구매 액션 제공**
   - 시스템은 구매 관련 액션 버튼을 제공한다:
     - "장바구니 담기"
     - "바로 구매"
   - 재고가 없는 옵션은 선택 불가 처리한다

### 4.5 대체 흐름 (Alternative Flows)

**AF-1: 존재하지 않는 상품 조회**
- 고객이 존재하지 않는 상품 ID로 접근한다
- 시스템은 "상품을 찾을 수 없습니다" 에러 페이지를 표시한다
- 시스템은 상품 목록 페이지로 돌아갈 수 있는 링크를 제공한다

**AF-2: 잘못된 상품 ID 형식**
- 고객이 잘못된 UUID 형식의 상품 ID로 접근한다
- 시스템은 "잘못된 상품 ID 형식입니다" 에러 메시지를 표시한다

**AF-3: 모든 옵션이 품절인 경우**
- 시스템은 "현재 품절된 상품입니다" 메시지를 표시한다
- 시스템은 "재입고 알림 신청" 기능을 제공한다 (향후 구현)

### 4.6 사후 조건 (Post-conditions)
- 고객이 상품의 모든 상세 정보를 확인한다
- 고객이 구매 가능한 옵션을 선택하여 장바구니에 담거나 바로 구매할 수 있다
- 고객이 재고 상태를 확인하여 구매 가능 여부를 파악한다

### 4.7 비즈니스 규칙 (Business Rules)

| ID | 규칙 | 설명 |
|----|------|------|
| BR-PROD-05 | 재고 표시 규칙 | 고객에게는 구매 가능 수량(availableQuantity)만 표시 |
| BR-PROD-06 | 품절 표시 | availableQuantity = 0인 옵션은 "품절" 표시 |
| BR-PROD-07 | 옵션 선택 필수 | 옵션이 있는 상품은 옵션 선택 없이 장바구니 담기 불가 |

### 4.8 예외 케이스 (Exception Cases)

| 예외 상황 | 시스템 동작 |
|-----------|-------------|
| 존재하지 않는 상품 ID | 404 Not Found: "상품을 찾을 수 없습니다." |
| 잘못된 UUID 형식 | 400 Bad Request: "잘못된 상품 ID 형식입니다." |

### 4.9 관련 유스케이스
- [UC-PROD-04: 재고 조회](#6-uc-prod-04-재고-조회) - 실시간 재고 확인
- [UC-CART-01: 장바구니 담기](../cart/use-cases.md) - 상품을 장바구니에 추가

---

## 5. UC-PROD-03: 인기 상품 조회

### 5.1 기본 정보

| 항목 | 내용 |
|------|------|
| **Use Case ID** | UC-PROD-03 |
| **Use Case 명** | 인기 상품 조회 (최근 3일 판매량 기준 Top 5) |
| **Actor** | Customer |
| **Goal** | 고객이 인기 있는 상품을 빠르게 확인하고 구매 결정에 참고한다 |
| **관련 User Story** | US-PROD-03 |
| **관련 요구사항** | FR-PROD-03 |
| **API Endpoint** | GET /products/popular |
| **우선순위** | SHOULD |

### 5.2 유스케이스 설명
최근 3일간 판매량이 높은 상위 5개 상품을 조회합니다. 메인 페이지나 추천 섹션에 표시되어 고객이 인기 있는 상품을 쉽게 발견하고 구매할 수 있도록 지원합니다.

### 5.3 사전 조건 (Pre-conditions)
- 시스템에 완료된 주문 데이터가 존재해야 함 (최소 1건 이상)
- 최근 3일 이내에 판매된 상품이 존재해야 함

### 5.4 주요 흐름 (Main Flow)

1. **인기 상품 섹션 표시**
   - 고객이 메인 페이지에 접속한다
   - 시스템은 "인기 상품" 섹션을 자동으로 표시한다

2. **인기 상품 계산**
   - 시스템은 최근 3일간의 판매 데이터를 집계한다
   - 시스템은 완료된 주문(COMPLETED)의 판매량만 계산한다
   - 시스템은 판매량이 높은 순으로 상위 5개 상품을 선정한다

3. **인기 상품 표시**
   - 시스템은 선정된 인기 상품 5개를 표시한다:
     - 상품명
     - 가격
     - 썸네일 이미지
     - (선택) "인기" 뱃지 표시
   - 고객이 상품을 클릭하면 상세 페이지로 이동한다

4. **상품 탐색**
   - 고객이 관심 있는 인기 상품을 선택한다
   - 시스템은 해당 상품의 상세 페이지로 이동한다

### 5.5 대체 흐름 (Alternative Flows)

**AF-1: 최근 3일간 판매 데이터가 없는 경우**
- 시스템은 빈 결과를 반환한다 (빈 배열)
- 시스템은 "현재 인기 상품이 없습니다" 메시지를 표시한다
- 시스템은 대신 "신규 상품" 또는 "추천 상품"을 표시한다

**AF-2: 판매된 상품이 5개 미만인 경우**
- 시스템은 판매된 상품만 표시한다 (예: 3개만 표시)
- 5개를 채우기 위해 다른 상품을 추가하지 않는다

### 5.6 사후 조건 (Post-conditions)
- 고객이 현재 인기 있는 상품 Top 5를 확인한다
- 고객이 트렌드를 파악하여 구매 결정에 참고한다
- 고객이 인기 상품 중 하나를 선택하여 구매 프로세스를 진행할 수 있다

### 5.7 비즈니스 규칙 (Business Rules)

| ID | 규칙 | 설명 |
|----|------|------|
| BR-PROD-08 | 판매량 집계 기간 | 최근 3일간의 판매 데이터만 집계 |
| BR-PROD-09 | 주문 상태 제한 | 완료된 주문(COMPLETED)만 집계에 포함 |
| BR-PROD-10 | 인기 상품 개수 | 상위 5개 상품만 표시 |
| BR-PROD-11 | 동점 처리 | 판매량이 동일한 경우 상품 등록 최신순으로 정렬 |

### 5.8 예외 케이스 (Exception Cases)

| 예외 상황 | 시스템 동작 |
|-----------|-------------|
| 판매 데이터 없음 | 200 OK: [] (빈 배열 반환, 에러 아님) |

### 5.9 성능 고려사항
- 인기 상품은 1시간마다 캐싱하여 성능 최적화
- 매시간 자동으로 갱신되어 최신 트렌드 반영

---

## 6. UC-PROD-04: 재고 조회

### 6.1 기본 정보

| 항목 | 내용 |
|------|------|
| **Use Case ID** | UC-PROD-04 |
| **Use Case 명** | 재고 조회 |
| **Actor** | Customer |
| **Goal** | 고객이 상품의 옵션별 재고 상태를 실시간으로 확인하여 구매 가능 여부를 판단한다 |
| **관련 User Story** | US-PROD-04 |
| **관련 요구사항** | FR-PROD-04 |
| **API Endpoint** | GET /products/:id/stock |
| **우선순위** | MUST |

### 6.2 유스케이스 설명
특정 상품의 옵션별 재고 수량을 조회합니다. 장바구니 추가 전에 재고 확인 용도로 사용되며, 고객이 구매 가능한 수량을 정확하게 파악할 수 있도록 지원합니다.

### 6.3 사전 조건 (Pre-conditions)
- 조회하려는 상품이 시스템에 등록되어 있어야 함
- 상품 ID가 유효한 UUID 형식이어야 함

### 6.4 주요 흐름 (Main Flow)

1. **재고 확인 요청**
   - 고객이 상품 상세 페이지에서 옵션을 선택한다
   - 시스템은 선택한 옵션의 재고 정보를 실시간으로 조회한다

2. **재고 정보 표시**
   - 시스템은 각 옵션별 재고 상태를 표시한다:
     - 옵션명 (예: "레드 / L")
     - 구매 가능 수량 (availableQuantity)
   - 재고 상태에 따라 다른 메시지를 표시한다:
     - 재고 충분: "재고 있음"
     - 재고 부족: "재고 부족 (X개 남음)"
     - 품절: "품절"

3. **수량 선택 제한**
   - 고객이 구매 수량을 입력한다
   - 시스템은 재고 범위 내에서만 수량 선택을 허용한다
   - 재고보다 많은 수량 입력 시 경고 메시지를 표시한다

4. **실시간 재고 업데이트**
   - 다른 고객이 동일 상품을 구매하는 경우
   - 시스템은 재고 정보를 자동으로 갱신한다
   - 고객이 현재 정확한 재고 상태를 확인할 수 있도록 한다

### 6.5 대체 흐름 (Alternative Flows)

**AF-1: 존재하지 않는 상품 ID로 조회**
- 시스템은 빈 배열을 반환한다 (에러 아님)
- 상품 상세 페이지에서는 "재고 정보 없음" 메시지를 표시한다

**AF-2: 모든 옵션이 품절인 경우**
- 시스템은 모든 옵션의 availableQuantity가 0임을 표시한다
- 시스템은 "현재 품절된 상품입니다" 메시지를 표시한다
- 장바구니 담기 버튼을 비활성화한다

**AF-3: 선택한 수량이 재고보다 많은 경우**
- 고객이 재고보다 많은 수량을 입력한다
- 시스템은 "재고가 부족합니다 (현재 재고: X개)" 경고 메시지를 표시한다
- 시스템은 최대 구매 가능 수량을 자동으로 설정한다

### 6.6 사후 조건 (Post-conditions)
- 고객이 정확한 재고 정보를 확인한다
- 고객이 구매 가능한 수량 범위 내에서 상품을 선택한다
- 고객이 재고 상태를 고려하여 구매 결정을 내린다

### 6.7 비즈니스 규칙 (Business Rules)

| ID | 규칙 | 설명 |
|----|------|------|
| BR-PROD-12 | 재고 정보 노출 | 고객에게는 구매 가능 수량(availableQuantity)만 노출 |
| BR-PROD-13 | 내부 재고 비노출 | 예약 수량(reservedQuantity), 판매 수량(soldQuantity)은 비노출 |
| BR-PROD-14 | 실시간 조회 | 재고 정보는 캐싱하지 않고 항상 실시간 조회 |
| BR-PROD-15 | 보안 정책 | 판매량 등 비즈니스 민감 정보는 노출하지 않음 |

### 6.8 예외 케이스 (Exception Cases)

| 예외 상황 | 시스템 동작 |
|-----------|-------------|
| 존재하지 않는 상품 ID | 200 OK: [] (빈 배열 반환, 에러 아님) |
| 잘못된 UUID 형식 | 400 Bad Request: "잘못된 상품 ID 형식입니다." |

### 6.9 보안 고려사항

#### 재고 정보 노출 정책
- **노출**: `availableQuantity` (구매 가능 수량)
- **비노출**: `reservedQuantity`, `soldQuantity` (내부 관리용)

**이유**:
- 예약 및 판매 수량은 비즈니스 민감 정보
- 경쟁사에 판매량 정보 노출 방지
- 재고 조작 공격 방지

### 6.10 관련 유스케이스
- [UC-PROD-02: 상품 상세 조회](#4-uc-prod-02-상품-상세-조회) - 상품 상세와 함께 재고 표시
- [UC-CART-01: 장바구니 담기](../cart/use-cases.md) - 장바구니 추가 전 재고 확인

---

## 7. 도메인 용어 정리

| 용어 | 설명 |
|------|------|
| **상품 (Product)** | 고객이 구매할 수 있는 판매 항목 |
| **카테고리 (Category)** | 상품을 분류하는 기준 (예: 의류, 전자제품) |
| **옵션 (Product Option)** | 상품의 선택 가능한 속성 (예: 색상, 사이즈) |
| **재고 (Stock)** | 판매 가능한 상품의 수량 |
| **구매 가능 수량 (Available Quantity)** | 고객이 즉시 구매할 수 있는 재고 수량 |
| **예약 수량 (Reserved Quantity)** | 장바구니에 담겼지만 결제 전인 수량 (내부 관리용) |
| **판매 수량 (Sold Quantity)** | 이미 판매된 수량 (내부 관리용) |
| **인기 상품 (Popular Product)** | 최근 3일간 판매량이 높은 상위 5개 상품 |

---

## 8. 관련 문서

- [아키텍처](../architecture.md) - 시스템 아키텍처
- [요구사항 분석](../requirements.md) - 비즈니스 요구사항
- [사용자 스토리](../user-stories.md) - 사용자 관점의 시나리오
- [API 명세서](../api-specification.md) - REST API 계약
- [데이터 모델](../data-model.md) - 데이터베이스 스키마
- [Product 시퀀스 다이어그램](./sequence-diagrams.md) - 기술 구현 명세
- [Cart 유스케이스](../cart/use-cases.md) - 다음 도메인

---

## 9. 버전 히스토리

| 버전 | 날짜 | 작성자 | 변경 내역 |
|------|------|--------|-----------|
| 1.0.0 | 2025-11-03 | Development Team | 초기 문서 작성 |
| 2.0.0 | 2025-11-03 | Development Team | 비즈니스 관점과 기술 관점 분리 (Issue #006) |

---

**문서 끝**
